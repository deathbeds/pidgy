"use strict";(self.webpackChunkjupyterlab_videochat=self.webpackChunkjupyterlab_videochat||[]).push([[872],{872:(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var n,a=o(626),i=o(504),r=o(669),s=o(403),l=o(149),c=o(998),d=o(111),m=o(672),u=o(185),h=o(36),g=o(168),p=o(797);class v extends l.VDomModel{constructor(e){super(),this._rooms=[],this._isInitialized=!1,this._initialized=new p.PromiseDelegate,this._roomProviders=new Map,this._roomProvidedBy=new WeakMap,this.__=(e,...t)=>this._trans.__(e,...t),this.onSettingsChanged=()=>{this.stateChanged.emit(void 0)},this.providerForRoom=e=>{const t=this._roomProvidedBy.get(e)||null;return t?this._roomProviders.get(t):null},this._trans=e.trans,this._meetChanged=new g.Signal(this),this._roomProvidersChanged=new g.Signal(this),this._currentRoomChanged=new g.Signal(this),this._roomProvidersChanged.connect(this.onRoomProvidersChanged,this)}get rooms(){return this._rooms}get isInitialized(){return this._isInitialized}get initialized(){return this._initialized.promise}get currentRoom(){return this._currentRoom}set currentRoom(e){this._currentRoom=e,this.stateChanged.emit(void 0),this._currentRoomChanged.emit(void 0),null!=e&&null==e.id&&this.createRoom(e).catch(console.warn)}get currentRoomChanged(){return this._currentRoomChanged}get config(){return this._config}get meet(){return this._meet}set meet(e){this._meet!==e&&(this._meet=e,this._meetChanged.emit(void 0))}get meetChanged(){return this._meetChanged}get roomProvidersChanged(){return this._roomProvidersChanged}get settings(){return this._settings}set settings(e){this._settings&&this._settings.changed.disconnect(this.onSettingsChanged,this),this._settings=e,this._settings&&(this._settings.changed.connect(this.onSettingsChanged,this),this.isInitialized||(this._isInitialized=!0,this._initialized.resolve(void 0))),this.stateChanged.emit(void 0)}get currentArea(){var e;return(null===(e=this.settings)||void 0===e?void 0:e.composite.area)||"right"}set currentArea(e){this.settings.set("area",e).catch(void 0)}get mainWidget(){return this.initialized.then((()=>this._mainWidget))}setMainWidget(e){this._mainWidget?console.error(this.__("Main Video Chat widget already set")):this._mainWidget=e}registerRoomProvider(e){this._roomProviders.set(e.id,e);const{stateChanged:t}=e.provider;t&&t.connect((async()=>await Promise.all([this.updateConfig(),this.updateRooms()]))),this._roomProvidersChanged.emit(void 0)}async onRoomProvidersChanged(){try{await Promise.all([this.updateConfig(),this.updateRooms()])}catch(e){console.warn(e)}this.stateChanged.emit(void 0)}get rankedProviders(){const e=[...this._roomProviders.values()];return e.sort(((e,t)=>e.rank-t.rank)),e}async updateConfig(){let e={jitsiServer:h.cE};for(const{provider:t,id:o}of this.rankedProviders)try{e=Object.assign(Object.assign({},e),await t.updateConfig())}catch(e){console.warn(this.__("Failed to load config from %1",o)),console.trace(e)}return this._config=e,this.stateChanged.emit(void 0),e}async updateRooms(){let e,t=[];for(const{provider:o,id:n}of this.rankedProviders)try{e=await o.updateRooms();for(const t of e)this._roomProvidedBy.set(t,n);t=[...t,...e]}catch(e){console.warn(this.__("Failed to load rooms from %1",n)),console.trace(e)}return this._rooms=t,this.stateChanged.emit(void 0),t}async createRoom(e){let t=null;for(const{provider:o,id:n}of this.rankedProviders)if(o.canCreateRooms)try{t=await o.createRoom(e);break}catch(e){console.warn(this.__("Failed to create room from %1",n))}return this.currentRoom=t,t}get canCreateRooms(){for(const{provider:e}of this.rankedProviders)if(e.canCreateRooms)return!0;return!1}getJitsiAPI(){return()=>{var e;if(n.api)return n.api;if(null!=this.config){const t=`https://${(null===(e=this.config)||void 0===e?void 0:e.jitsiServer)?this.config.jitsiServer:h.cE}/external_api.js`;n.ensureExternalAPI(t).then((()=>this.stateChanged.emit(void 0))).catch(console.warn)}return null}}}!function(e){let t,o;e.ensureExternalAPI=async function(n){return null==o&&(h.eM&&console.warn("loading..."),o=new p.PromiseDelegate,t=document.createElement("script"),t.id=`id-${h.ux}-external-api`,t.src=n,t.async=!0,t.type="text/javascript",document.body.appendChild(t),t.onload=()=>{e.api=window.JitsiMeetExternalAPI,h.eM&&console.warn("loaded..."),o.resolve(e.api)}),o.promise}}(n||(n={}));var b=o(271),w=o.n(b);const C=e=>{const t=w().createRef(),{__:o}=e;return(0,b.useEffect)((()=>{const n={roomName:e.room.id,parentNode:t.current,userInfo:{displayName:a.PageConfig.getOption("hubUser")}},{displayName:i,email:r,configOverwrite:s,interfaceConfigOverwrite:l}=e;let c;null!=i&&(n.userInfo.displayName=i),null!=r&&(n.userInfo.email=r),null!=s?n.configOverwrite=s:console.warn(o("No Jitsi third-party requests will be blocked")),null!=l?n.interfaceConfigOverwrite=l:console.warn(o("All Jitsi features will be enabled"));let d=e.jitsiAPI();return null==d?console.info(o("Jitsi API not yet loaded, will try again in a moment")):c=new d(e.domain,n),c&&(e.onMeet(c),c.executeCommand("subject",e.room.displayName),c.on("readyToClose",(()=>e.onRoomSelect(null)))),()=>{e.onMeet(null),c&&c.dispose()}})),w().createElement("div",{className:`${h.ux}-jitsi-container`,ref:t})},f='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n  \x3c!-- https://fonts.gstatic.com/s/i/materialicons/voice_chat/v6/24px.svg?download=true --\x3e\n  \x3c!-- https://raw.githubusercontent.com/google/material-design-icons/master/LICENSE --\x3e\n  <path d="M0 0h24v24H0z" fill="none" />\n  <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n    <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12l-4-3.2V14H6V6h8v3.2L18 6v8z" />\n  </g>\n</svg>\n',R=new r.LabIcon({name:`${h.NS}:chat`,svgstr:f}),_=new r.LabIcon({name:`${h.NS}:chat-pretty`,svgstr:f.replace("jp-icon3","jp-icon-brand0")}),y=new r.LabIcon({name:`${h.NS}:group`,svgstr:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24" viewBox="0 0 24 24" width="24">\n    <rect fill="none" height="24" width="24"/>\n    <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n        <path d="M12,12.75c1.63,0,3.07,0.39,4.24,0.9c1.08,0.48,1.76,1.56,1.76,2.73L18,18H6l0-1.61c0-1.18,0.68-2.26,1.76-2.73 C8.93,13.14,10.37,12.75,12,12.75z M4,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C2,12.1,2.9,13,4,13z M5.13,14.1 C4.76,14.04,4.39,14,4,14c-0.99,0-1.93,0.21-2.78,0.58C0.48,14.9,0,15.62,0,16.43V18l4.5,0v-1.61C4.5,15.56,4.73,14.78,5.13,14.1z M20,13c1.1,0,2-0.9,2-2c0-1.1-0.9-2-2-2s-2,0.9-2,2C18,12.1,18.9,13,20,13z M24,16.43c0-0.81-0.48-1.53-1.22-1.85 C21.93,14.21,20.99,14,20,14c-0.39,0-0.76,0.04-1.13,0.1c0.4,0.68,0.63,1.46,0.63,2.29V18l4.5,0V16.43z M12,6c1.66,0,3,1.34,3,3 c0,1.66-1.34,3-3,3s-3-1.34-3-3C9,7.34,10.34,6,12,6z"/>\n    </g>\n</svg>\n'}),E=new r.LabIcon({name:`${h.NS}:group-new`,svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n        <path d="M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"/>\n    </g>\n</svg>\n'}),S=new r.LabIcon({name:`${h.NS}:public`,svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>\n    </g>\n</svg>\n'}),N=new r.LabIcon({name:`${h.NS}:user`,svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">\n    <g class="jp-icon3 jp-icon-selectable" fill="#616161">\n        <path d="M0 0h24v24H0z" fill="none"/><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z"/>\n    </g>\n</svg>\n'}),P={tag:"span",width:"20px",height:"20px"},I=w().createElement("li",null,w().createElement("blockquote",null,w().createElement("p",null,w().createElement("strong",null,"No named Hub rooms are configured.")),w().createElement("p",null,w().createElement("em",null,"Create or join a Hub room by name below.")))),x={target:"_blank",rel:"noopener noreferrer"},j=e=>{const{__:t}=e;return w().createElement("div",{className:`${h.ux}-rooms`},w().createElement("label",{id:`id-${h.ux}-user-info`},w().createElement(N.react,Object.assign({},P)),"My Chat Info"),w().createElement("ul",{"aria-labelledby":`id-${h.ux}-user-info`},w().createElement("li",{className:`${h.ux}-input-group`},w().createElement("label",null,"Name"),w().createElement("input",{className:"jp-mod-styled",onInput:t=>e.onDisplayNameChanged(t.currentTarget.value),defaultValue:e.displayName}),w().createElement("blockquote",null,t("(optional) Default name to show to other chat participants")),w().createElement("hr",null),w().createElement("label",null,"Email"),w().createElement("input",{className:"jp-mod-styled",onInput:t=>e.onEmailChanged(t.currentTarget.value),defaultValue:e.email}),w().createElement("blockquote",null,t("(optional) Email to show to other chat participants.")," ",t("An avatar icon will be shown if this address is registered at")," ",w().createElement("a",Object.assign({href:"https://gravatar.com"},x),"gravatar.com"),"."))),e.canCreateRooms?(e=>{const[t,o]=(0,b.useState)(""),{__:n}=e;return w().createElement("div",{className:`${h.ux}-rooms-server`},w().createElement("label",{id:`id-${h.ux}-server-room-list`},w().createElement(y.react,Object.assign({},P)),n("Select Room to join")),w().createElement("ul",{"aria-labelledby":`id-${h.ux}-server-room-list`},e.rooms.length?e.rooms.map(((t,o)=>{var a;return w().createElement("li",{key:t.id},w().createElement("label",null,t.displayName),w().createElement("button",{className:"jp-mod-styled jp-mod-accept",onClick:()=>e.onRoomSelect(t)},n("JOIN")),w().createElement("blockquote",null,t.description),w().createElement("span",null,null===(a=e.providerForRoom(t))||void 0===a?void 0:a.label))})):I),w().createElement("label",{id:`id-${h.ux}-new-server-room-list`},w().createElement(E.react,Object.assign({},P)),n("Join Room by name")),w().createElement("ul",{"aria-labelledby":`id-${h.ux}-new-server-room-list`},w().createElement("li",{className:`${h.ux}-has-input`},w().createElement("div",{className:`${h.ux}-room-displayname-input`},w().createElement("input",{className:"jp-mod-styled",placeholder:"  "+n("Server Room Name"),onInput:e=>o(e.currentTarget.value)}),w().createElement("button",{className:"jp-mod-styled "+(t.trim().length?"jp-mod-accept":""),disabled:!t.trim().length,onClick:()=>e.onCreateRoom({displayName:t})},"JOIN")),w().createElement("blockquote",null,n("Join (or create) a named Room.")," ",n("Share this name with other users of your Hub, Binder, or others that can share a server key.")))))})(e):w().createElement(w().Fragment,null),e.disablePublicRooms?w().createElement(w().Fragment,null):(e=>{const[t,o]=(0,b.useState)(""),{__:n}=e;return w().createElement("div",{className:`${h.ux}-rooms-public`},w().createElement("label",{id:`id-${h.ux}-public-room-list`},w().createElement(S.react,Object.assign({},P)),n("Join Public room by name")),w().createElement("ul",{"aria-labelledby":`id-${h.ux}-public-room-list`},w().createElement("li",{className:`${h.ux}-has-input`},w().createElement("div",{className:`${h.ux}-room-displayname-input`},w().createElement("input",{className:"jp-mod-styled",placeholder:"  "+n("Public Room ID"),onInput:e=>o(e.currentTarget.value)}),w().createElement("button",{className:"jp-mod-styled "+(t.trim().length?"jp-mod-accept":""),disabled:!t.trim().length,onClick:()=>e.onRoomSelect({displayName:t,id:t})},"JOIN")),w().createElement("blockquote",null,n("Join or create a public room.")," ",n("Share this name with anyone who can access")," ",w().createElement("a",Object.assign({href:`https://${e.domain}`},x),e.domain),"."))))})(e))},O=e=>{var t,o;const n=null===(t=e.config)||void 0===t?void 0:t.jitsiServer;return w().createElement(w().Fragment,null,null!=n&&null!=(null===(o=e.currentRoom)||void 0===o?void 0:o.id)?w().createElement(C,{jitsiAPI:e.jitsiAPI,room:e.currentRoom,domain:n,onRoomSelect:e.onRoomSelect,onMeet:e.onMeet,email:e.email,displayName:e.displayName,configOverwrite:e.configOverwrite,interfaceConfigOverwrite:e.interfaceConfigOverwrite,providerForRoom:e.providerForRoom,__:e.__}):w().createElement(j,{currentRoom:e.currentRoom,onCreateRoom:e.onCreateRoom,onRoomSelect:e.onRoomSelect,onEmailChanged:e.onEmailChanged,onDisplayNameChanged:e.onDisplayNameChanged,rooms:e.rooms,email:e.email,displayName:e.displayName,domain:n,disablePublicRooms:e.disablePublicRooms,canCreateRooms:e.canCreateRooms,providerForRoom:e.providerForRoom,__:e.__}))};class $ extends l.VDomRenderer{constructor(e,t){super(e),this.onRoomSelect=e=>{this.model.currentRoom=e},this.onCreateRoom=e=>{this.model.createRoom(e).catch(console.warn)},this.onMeet=e=>{this.model.meet=e},this.onEmailChanged=e=>{var t;null===(t=this.model.settings)||void 0===t||t.set("email",e).catch(console.warn)},this.onDisplayNameChanged=e=>{var t;null===(t=this.model.settings)||void 0===t||t.set("displayName",e).catch(console.warn)},this.addClass(h.ux)}render(){const{settings:e}=this.model;return w().createElement(O,{jitsiAPI:this.model.getJitsiAPI(),onRoomSelect:this.onRoomSelect,onCreateRoom:this.onCreateRoom,onEmailChanged:this.onEmailChanged,onDisplayNameChanged:this.onDisplayNameChanged,onMeet:this.onMeet,providerForRoom:this.model.providerForRoom,currentRoom:this.model.currentRoom,config:this.model.config,rooms:this.model.rooms,email:`${(null==e?void 0:e.composite.email)||""}`,displayName:`${(null==e?void 0:e.composite.displayName)||""}`,configOverwrite:null==e?void 0:e.composite.configOverwrite,interfaceConfigOverwrite:null==e?void 0:e.composite.interfaceConfigOverwrite,disablePublicRooms:!!(null==e?void 0:e.composite.disablePublicRooms),canCreateRooms:this.model.canCreateRooms,__:this.model.__})}}var M=o(695);class F{constructor(e){this._serverSettings=e.serverSettings||M.ServerConnection.makeSettings()}async updateConfig(){return await this.requestAPI("config")}async updateRooms(){return await this.requestAPI("rooms")}get canCreateRooms(){return!0}async createRoom(e){return await this.requestAPI("generate-room",{method:"POST",body:JSON.stringify(e)})}async requestAPI(e,t={}){const o=this._serverSettings,n=a.URLExt.join(o.baseUrl,h.Pj,e);let i;try{i=await M.ServerConnection.makeRequest(n,t,o)}catch(e){throw new M.ServerConnection.NetworkError(e)}const r=await i.json();if(!i.ok)throw new M.ServerConnection.ResponseError(i,r.message);return r}}class k extends l.VDomRenderer{render(){const{currentRoom:e}=this.model;if(!e)return w().createElement(w().Fragment,null);const t=this.model.providerForRoom(e),o=t?t.label:this.model.__("Public");return w().createElement("div",{className:`${h.ux}-active-room-name jp-Toolbar-item`,title:e.id},w().createElement("i",null,o),`${e.displayName||e.id}`)}}const A="Video Chat",T=A;function L(e){return!!e.shell.layoutModified}const z={id:`${h.NS}:plugin`,autoStart:!0,requires:[d.ISettingRegistry],optional:[s.ITranslator,l.ICommandPalette,m.ILauncher,i.ILayoutRestorer,u.IMainMenu],provides:h.WL,activate:async function(e,t,o,n,a,i,c){const{commands:d,shell:m}=e,u=L(e)?m:null,g=new v({trans:(o||s.nullTranslator).load(h.NS)}),{__:p}=g;let b,w,C=null;const f=new l.WidgetTracker({namespace:h.NS});if(!b||b.isDisposed){w=new $(g,{}),b=new l.MainAreaWidget({content:w}),b.addClass(`${h.ux}-wrapper`),g.setMainWidget(b),b.toolbar.addItem(h.Zj.SPACER_LEFT,l.Toolbar.createSpacerItem()),b.toolbar.addItem(h.Zj.TITLE,new k(g)),b.toolbar.addItem(h.Zj.SPACER_RIGHT,l.Toolbar.createSpacerItem());const e=new l.CommandToolbarButton({id:h.OF.disconnect,commands:d,icon:r.stopIcon}),t=()=>{g.currentRoom?e.show():e.hide()};g.currentRoomChanged.connect(t),b.toolbar.addItem(h.Zj.DISCONNECT,e),t(),w.id=`id-${h.NS}`,w.title.caption=p(A),w.title.closable=!1,w.title.icon=R}function y(){b.title.caption=null!=C?C:p(A),b.title.label="main"===g.currentArea?b.title.caption:""}function E(t,o=!0){if(h.eM&&console.warn(`add to shell in are ${t}, ${!o||"not "} active`),t=t||g.currentArea,u)u.add(b,t),y(),b.update(),f.has(b)||f.add(b).catch(void 0),o&&m.activateById(b.id);else if(-1!==window.location.search.indexOf(h.bL)){document.title=[document.title.split(" - ")[0],p(A)].join(" - "),e.shell.currentWidget.parent=null,e.shell.add(b,"main",{rank:0});const{parent:t}=b;t.addClass(`${h.ux}-main-parent`),setTimeout((()=>{t.update(),t.fit(),e.shell.fit(),e.shell.update()}),100)}}return g.meetChanged.connect((()=>{g.meet?g.meet.on("subjectChange",(e=>{C=e.subject,y()})):C=null,y()})),t.load(z.id).then((e=>{g.settings=e;let t=g.settings.composite.area;e.changed.connect((()=>{t!==g.settings.composite.area&&E(),t=g.settings.composite.area})),E(null,!1)})).catch((()=>E(null,!1))),d.addCommand(h.OF.open,{label:p(A),icon:_,execute:async e=>{var t;await g.initialized,E(null,!0),(null===(t=g.currentRoom)||void 0===t?void 0:t.displayName)!==e.displayName&&(g.currentRoom={displayName:e.displayName})}}),d.addCommand(h.OF.disconnect,{label:p("Disconnect Video Chat"),execute:()=>g.currentRoom=null,icon:r.stopIcon}),d.addCommand(h.OF.toggleArea,{label:p("Toggle Video Chat Sidebar"),icon:r.launcherIcon,execute:async()=>{g.currentArea=["right","left"].includes(g.currentArea)?"main":"right"}}),n&&n.addItem({command:h.OF.open,category:p(T)}),a&&a.add({command:h.OF.open,args:{area:"main"}}),i&&i.restore(f,{command:h.OF.open,name:()=>`id-${h.NS}`}).catch(console.warn),c&&u&&c.fileMenu.newMenu.addGroup([{command:h.OF.open}]),g}},V={id:`${h.NS}:rooms-server`,autoStart:!0,requires:[h.WL],optional:[i.IRouter],activate:function(e,t,o){const{__:n}=t,{commands:a}=e,i=new F({serverSettings:e.serviceManager.serverSettings});t.registerRoomProvider({id:"server",label:n("Server"),rank:0,provider:i}),o&&(a.addCommand(h.OF.serverRouterStart,{label:"Open Server Video Chat from URL",execute:async e=>{const{request:n}=e,i=new URL(`http://example.com${n}`).searchParams.get(h.AY),r=async()=>{var e;o.routed.disconnect(r),(null===(e=t.currentRoom)||void 0===e?void 0:e.displayName)!=i&&await a.execute(h.OF.open,{displayName:i})};o.routed.connect(r)}}),o.register({command:h.OF.serverRouterStart,pattern:/.*/,rank:29}))}},B={id:`${h.NS}:rooms-public`,autoStart:!0,requires:[h.WL],optional:[i.IRouter,l.ICommandPalette],activate:async function(e,t,o,n){const{commands:a}=e,{__:i}=t;t.registerRoomProvider({id:"public",label:i("Public"),rank:999,provider:{updateRooms:async()=>[],canCreateRooms:!1,updateConfig:async()=>({})}}),a.addCommand(h.OF.togglePublicRooms,{label:i("Toggle Video Chat Public Rooms"),isVisible:()=>!!t.settings,isToggleable:!0,isToggled:()=>{var e;return!(null===(e=t.settings)||void 0===e?void 0:e.composite.disablePublicRooms)},execute:async()=>{var e;t.settings?await t.settings.set("disablePublicRooms",!(null===(e=t.settings)||void 0===e?void 0:e.composite.disablePublicRooms)):console.warn(i("Video chat settings not loaded"))}}),o&&(a.addCommand(h.OF.publicRouterStart,{label:i("Open Public Video Chat from URL"),execute:async e=>{const{request:n}=e,a=new URL(`http://example.com${n}`).searchParams.get(h.dx),r=async()=>{var e;o.routed.disconnect(r),(null===(e=t.currentRoom)||void 0===e?void 0:e.displayName)!=a&&(t.currentRoom={id:a,displayName:a,description:i("A Public Room")})};o.routed.connect(r)}}),o.register({command:h.OF.publicRouterStart,pattern:/.*/,rank:99})),n&&n.addItem({command:h.OF.togglePublicRooms,category:T})}},q={id:`${h.NS}:retro`,autoStart:!0,requires:[h.WL],optional:[c.IFileBrowserFactory,u.IMainMenu],activate:function(e,t,o,n){if(!a.PageConfig.getOption(h.zw))return;const{__:i}=t,r=a.PageConfig.getBaseUrl(),s=a.URLExt.join(r,h.YL),{commands:c}=e;if(c.addCommand(h.OF.openTab,{label:i("New Video Chat"),icon:_,execute:e=>{window.open(`${s}?${h.bL}`,"_blank")}}),n&&n.fileMenu.newMenu.addGroup([{command:h.OF.openTab}]),o){const e=l.Toolbar.createSpacerItem();e.node.style.flex="1",o.defaultBrowser.toolbar.insertItem(999,"videochat-spacer",e),o.defaultBrowser.toolbar.insertItem(1e3,"new-videochat",new l.CommandToolbarButton({commands:c,id:h.OF.openTab}))}}},D={id:`${h.NS}:toggle-area`,autoStart:!0,requires:[h.WL],optional:[l.ICommandPalette],activate:function(e,t,o){const{shell:n,commands:a}=e,{__:i}=t;if(!L(e)||!n)return;const s=new l.CommandToolbarButton({id:h.OF.toggleArea,commands:a,icon:r.launcherIcon});t.mainWidget.then((e=>{e.toolbar.insertBefore(h.Zj.SPACER_LEFT,h.Zj.TOGGLE_AREA,s)})).catch((e=>console.warn(i("Couldn't add Video Chat area toggle"),e))),o&&o.addItem({command:h.OF.toggleArea,category:i(T)})}},H=[z,V,B,q,D]},36:(e,t,o)=>{o.d(t,{AY:()=>s,NS:()=>a,OF:()=>g,Pj:()=>i,WL:()=>p,YL:()=>d,Zj:()=>h,bL:()=>u,cE:()=>c,dx:()=>l,eM:()=>v,ux:()=>r,zw:()=>m});var n=o(797);const a="jupyterlab-videochat",i="videochat",r="jp-VideoChat",s="jvc",l="JVC-PUBLIC",c="meet.jit.si",d="retro/tree",m="retroPage",u="show-videochat";var h,g;!function(e){e.SPACER_LEFT="spacer-left",e.SPACER_RIGHT="spacer-right",e.TOGGLE_AREA="toggle-sidebar",e.DISCONNECT="disconnect",e.TITLE="title"}(h||(h={})),function(e){e.open=`${a}:open`,e.openTab=`${a}:open-tab`,e.toggleArea=`${a}:togglearea`,e.disconnect=`${a}:disconnect`,e.togglePublicRooms=`${a}:togglepublic`,e.serverRouterStart=`${a}:routerserver`,e.publicRouterStart=`${a}:routerpublic`}(g||(g={}));const p=new n.Token(`${a}:IVideoChatManager`),v=window.location.href.indexOf("JVC_DEBUG")>-1}}]);