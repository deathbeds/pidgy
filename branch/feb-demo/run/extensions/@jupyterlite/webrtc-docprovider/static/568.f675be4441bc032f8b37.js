"use strict";(self.webpackChunk_jupyterlite_webrtc_docprovider=self.webpackChunk_jupyterlite_webrtc_docprovider||[]).push([[568],{529:(e,t,s)=>{s.d(t,{Si:()=>n,d:()=>o,wX:()=>i});var r=s(79);const i=new r.LabIcon({name:"webrtc-docprovider:webrtc",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="134" width="134" viewBox="0 0 134 134">\n  <path fill="#f60" d="M0 0c0-7.534-6.107-13.642-13.641-13.642-7.535 0-13.642 6.108-13.642 13.642s6.107 13.642 13.642 13.642C-6.107 13.642 0 7.534 0 0" transform="matrix(2.19695 0 0 -2.19695 74.323 101.632)"/>\n  <path fill="#fc0" d="M0 0c0-7.533-6.107-13.642-13.641-13.642-7.535 0-13.642 6.109-13.642 13.642 0 7.534 6.107 13.643 13.642 13.643C-6.107 13.643 0 7.534 0 0" transform="matrix(2.19695 0 0 -2.19695 133.6 59.672)"/>\n  <path fill="#0089cc" d="M0 0c0-7.533-6.107-13.642-13.642-13.642-7.533 0-13.641 6.109-13.641 13.642 0 7.534 6.108 13.643 13.641 13.643C-6.107 13.643 0 7.534 0 0" transform="matrix(2.19695 0 0 -2.19695 60.34 59.01)"/>\n  <path fill="#009939" d="M0 0c0-7.534-6.107-13.642-13.643-13.642-7.533 0-13.641 6.108-13.641 13.642s6.108 13.642 13.641 13.642C-6.107 13.642 0 7.534 0 0" transform="matrix(2.19695 0 0 -2.19695 120.279 101.632)"/>\n  <path fill="#bf0000" d="M0 0c0-7.534-6.108-13.642-13.642-13.642S-27.284-7.534-27.284 0s6.108 13.642 13.642 13.642S0 7.534 0 0" transform="matrix(2.19695 0 0 -2.19695 96.97 32.368)"/>\n  <path fill="#fc0007" d="M0 0c0-.287.025-.568.043-.851C6.094.545 10.61 5.955 10.61 12.43c0 .287-.025.569-.043.852C4.516 11.885 0 6.475 0 0" transform="matrix(2.19695 0 0 -2.19695 73.66 59.672)"/>\n  <path fill="#1cd306" d="M0 0c2.351-4.11 6.769-6.887 11.843-6.887 2.068 0 4.021.474 5.778 1.298-2.35 4.11-6.768 6.887-11.843 6.887C3.71 1.298 1.757.824 0 0" transform="matrix(2.19695 0 0 -2.19695 77.617 74.512)"/>\n  <path fill="#0f7504" d="M0 0c0-3.333 1.198-6.383 3.184-8.752A13.583 13.583 0 0 1 6.366 0c0 3.333-1.198 6.383-3.182 8.752A13.574 13.574 0 0 1 0 0" transform="matrix(2.19695 0 0 -2.19695 60.34 101.632)"/>\n  <path fill="#0c5e87" d="M0 0a13.578 13.578 0 0 1 5.401-1.117c5.024 0 9.401 2.723 11.769 6.766a13.581 13.581 0 0 1-5.401 1.116C6.745 6.765 2.367 4.042 0 0" transform="matrix(2.19695 0 0 -2.19695 18.502 86.525)"/>\n  <path fill="#6b0001" d="M0 0c-.032-.38-.059-.762-.059-1.151 0-6.47 4.509-11.875 10.553-13.277.031.38.058.762.058 1.15C10.552-6.808 6.044-1.401 0 0" transform="matrix(2.19695 0 0 -2.19695 37.16 29.836)"/>\n  <path fill="#fff" d="M0 0h-2.134A3.414 3.414 0 0 0-5.55 3.406v19.316a3.415 3.415 0 0 0 3.416 3.407h26.759a3.414 3.414 0 0 0 3.415-3.407V3.406A3.413 3.413 0 0 0 24.625 0h-9.116l-18.29-8.966z" transform="matrix(2.19695 0 0 -2.19695 39.958 97.92)"/>\n</svg>\n'}),n=new r.LabIcon({name:"webrtc-docprovider:share",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 24 24" width="24px" fill="#000000">\n    <path class="jp-icon-brand1 jp-icon-selectable" fill="#616161" d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.11-.9-2-2-2H4c-1.11 0-2 .89-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zm-7-3.53v-2.19c-2.78 0-4.61.85-6 2.72.56-2.67 2.11-5.33 6-5.87V7l4 3.73-4 3.74z" />\n</svg>\n'}),o=new r.LabIcon({name:"webrtc-docprovider:share-off",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 24 24" width="24px" fill="#000000">\n  <path class="jp-icon0 jp-icon-selectable" fill="#616161" d="M21.22 18.02l2 2H24v-2h-2.78zm.77-2l.01-10c0-1.11-.9-2-2-2H7.22l5.23 5.23c.18-.04.36-.07.55-.1V7.02l4 3.73-1.58 1.47 5.54 5.54c.61-.33 1.03-.99 1.03-1.74zM2.39 1.73L1.11 3l1.54 1.54c-.4.36-.65.89-.65 1.48v10c0 1.1.89 2 2 2H0v2h18.13l2.71 2.71 1.27-1.27L2.39 1.73zM7 15.02c.31-1.48.92-2.95 2.07-4.06l1.59 1.59c-1.54.38-2.7 1.18-3.66 2.47z" />\n</svg>\n'})},568:(e,t,s)=>{s.r(t),s.d(t,{CommandIds:()=>o.OF,DEFAULT_SIGNALING_SERVERS:()=>o.XU,FACTORY_PLUGIN_ID:()=>o.Qc,IWebRtcManager:()=>o.yA,LOCAL_HOSTS:()=>o.R3,NS:()=>o.NS,PLUGIN_ID:()=>o.Uu,PageOptions:()=>o.DF,RETRO_EDIT_PAGE:()=>o.pH,RETRO_NOTEBOOK_PAGE:()=>o.oK,RETRO_STATUS_PAGES:()=>o.L$,RETRO_STATUS_PLUGIN_ID:()=>o.UY,STATUS_PLUGIN_ID:()=>o.me,WebRtcManager:()=>r.H,WebRtcProvider:()=>n.i,shareIcon:()=>i.Si,shareOffIcon:()=>i.d,webrtcIcon:()=>i.wX});var r=s(372),i=s(529),n=s(866),o=s(36)},372:(e,t,s)=>{s.d(t,{H:()=>h});var r=s(351),i=s(99),n=s(797),o=s(168),a=s(38),l=s(866),c=s(36);class h{constructor(e){this.createProvider=e=>{if(this.disabled)return new i.ProviderMock;const t=Object.assign(Object.assign({},e),{room:this.fullRoomId,usercolor:this.usercolor,username:this.username,signalingUrls:this.signalingUrls}),s=new l.i(t);return s.on("peers",((...e)=>{const{room:t}=s;t&&(this.peerCount=t.webrtcConns.size+t.bcConns.size)})),s},this._stateChanged=new o.Signal(this),this._peerCount=0,this._settings=e.settings||null,this._settings&&this._settings.changed.connect((()=>this._stateChanged.emit(void 0))),this._urlParams=this.initUrlParams(),this._randomParams=this.initRandomParams(),this._trans=e.trans}initUrlParams(){const e=new URLSearchParams(window.location.search);return{room:(e.get("room")||"").trim()||null,username:(e.get("username")||"").trim()||null,usercolor:(e.get("usercolor")||"").trim()||null}}initRandomParams(){return{room:n.UUID.uuid4(),usercolor:(0,i.getRandomColor)().slice(1),username:(0,i.getAnonymousUserName)()}}get _composite(){return this._settings?this._settings.composite:{}}get disabled(){return!("true"===r.PageConfig.getOption(c.DF.collaborative)&&!this._composite.disabled)}get username(){return this._urlParams.username||this._composite.username||this._randomParams.username}get usercolor(){return this._urlParams.usercolor||this._composite.usercolor||this._randomParams.usercolor}get roomName(){return this._urlParams.room||this._composite.room||this._randomParams.room}get fullRoomId(){const{roomName:e}=this;let t=r.PageConfig.getOption(c.DF.prefix)||this._composite.roomPrefix||null;if(null==t){const{hostname:e,origin:s}=window.location;t=c.R3.includes(e.toLowerCase())?n.UUID.uuid4():s}return a.codec.hex.fromBits(a.hash.sha256.hash(`${t}-${e}`))}get signalingUrls(){let e;try{if(e=JSON.parse(r.PageConfig.getOption(c.DF.urls)),e&&e.length)return e}catch(e){}return e=this._composite.signalingUrls||null,e&&e.length?e:(console.warn(this._trans.__("Using default public WebRTC signaling servers: not recommended for production.")),c.XU)}get peerCount(){return this._peerCount}set peerCount(e){e!==this._peerCount&&(this._peerCount=e,this._stateChanged.emit(void 0))}get stateChanged(){return this._stateChanged}get trans(){return this._trans}}},866:(e,t,s)=>{s.d(t,{i:()=>a});var r=s(797),i=s(57),n=s(538),o=s(36);class a extends n.WebrtcProvider{constructor(e){super(`${e.room}${e.path}`,e.ymodel.ydoc,a.yProviderOptions(e)),this._initialRequest=null;const{usercolor:t,username:s}=e;this.awareness=e.ymodel.awareness;const r=this.awareness.getLocalState();r&&!r.name&&this.awareness.setLocalStateField("user",{name:s,color:t})}setPath(){}requestInitialContent(){if(this._initialRequest)return this._initialRequest.promise;let e=!1;return this._initialRequest=new r.PromiseDelegate,this.on("synced",(t=>{this._initialRequest&&(this._initialRequest.resolve(t.synced),e=!0)})),setTimeout((()=>{!e&&this._initialRequest&&this._initialRequest.resolve(!1)}),1e3),this._initialRequest.promise}putInitializedState(){}acquireLock(){return Promise.resolve(0)}releaseLock(e){}}!function(e){e.yProviderOptions=function(e){return{signaling:e.signalingUrls&&e.signalingUrls.length?e.signalingUrls:o.XU,password:null,awareness:new i.GL(e.ymodel.ydoc),maxConns:20+Math.floor(15*Math.random()),filterBcConns:!0,peerOpts:{}}}}(a||(a={}))},36:(e,t,s)=>{s.d(t,{DF:()=>p,L$:()=>m,NS:()=>i,OF:()=>g,Qc:()=>o,R3:()=>d,UY:()=>l,Uu:()=>n,XU:()=>u,me:()=>a,oK:()=>c,pH:()=>h,yA:()=>_});var r=s(797);const i="@jupyterlite/webrtc-docprovider",n=`${i}:plugin`,o=`${i}:factory`,a=`${i}:status`,l=`${i}:retro-status`,c="notebooks",h="edit",m=[c,h],u=["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"],d=["127.0.0.1","localhost"];var g,p;!function(e){e.disable="webrtc-docprovider:disable"}(g||(g={})),function(e){e.urls="fullWebRtcSignalingUrls",e.prefix="webRtcRoomPrefix",e.collaborative="collaborative"}(p||(p={}));const _=new r.Token(`${i}:IWebRtcManager`)}}]);
//# sourceMappingURL=568.f675be4441bc032f8b37.js.map?v=f675be4441bc032f8b37